(this.webpackJsonpmillionaire_game=this.webpackJsonpmillionaire_game||[]).push([[0],{21:function(e,t,a){e.exports=a(42)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),c=a.n(s),u=a(8),o=a(3),i=a(2),l=a(12),m=a.n(l),p=a(16),d=a(17),g=a(18);function f(e){return Object(i.a)(e).sort((function(){return.5-Math.random()}))}var E=new(function(){function e(){Object(d.a)(this,e),this.CONFIG="./config.json"}return Object(g.a)(e,[{key:"getConfig",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.CONFIG));case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch, received ".concat(t.status));case 5:return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}());function _(e){this.answer=e,this.status="is-unselected"}var v=function(e){var t=[];return e.forEach((function(e){t=[].concat(Object(i.a)(t),[{cost:e,status:"is-open"}])})),t};function S(e,t){var a=[],n=[];for(var r in e){var s=t[r],c=e[r].length,u=f(s).slice(0,c);n=[].concat(Object(i.a)(n),Object(i.a)(u)),e.hasOwnProperty(r)&&(a=[].concat(Object(i.a)(a),Object(i.a)(v(e[r]))))}return a.forEach((function(e,t){e.id=t})),{steps:a.reverse(),questions:n}}var b=function(e){var t=e.question,a=e.answers,n=f([].concat(Object(i.a)(a.correct),Object(i.a)(a.incorrect))),r=[];return n.forEach((function(e){r=[].concat(Object(i.a)(r),[new _(e)])})),{question:t,correct:a.correct,answers:r}};var N=Object(o.d)(Object(u.b)((function(e){var t=e.game,a=t.status,n=t.score,r=t.steps,s=t.currentQuestion;return{status:a,gameStatus:t.gameStatus,score:n,steps:r,currentQuestion:s,currentStep:t.currentStep,canSelect:t.canSelect,debug:t.debug}}),(function(e){return{getConfig:function(t){return e(function(e){return function(t){t({type:"GET_CONFIG_REQUEST",payload:e}),E.getConfig().then((function(e){t({type:"GET_CONFIG_SUCCESS",payload:e})})).catch((function(e){t({type:"GET_CONFIG_FAIL",payload:new Error("Fetch error")})}))}}(t))},initialGameSession:function(){return e((function(e,t){var a=t().game.data,n=a.questions;e({type:"INITIAL_GAME_SESSION",payload:S(a.steps,n)})}))},getQuestion:function(){return e((function(e,t){var a=t().game,n=a.sessionQuestions,r=a.currentStep;e({type:"GET_QUESTION",payload:b(n[r])})}))},setStep:function(){return e((function(e,t){e({type:"SET_STEP",payload:t().game.currentStep})}))},checkAnswer:function(t,a){return e(function(e,t){return function(a,n){var r=n().game,s=r.currentQuestion,c=r.canSelect,u=r.currentStep,o=r.sessionQuestions,i=r.steps;if(c){var l=s.correct.includes(e);a({type:"HANDLE_ANSWER_START",payload:t}),setTimeout((function(){l?(a({type:"HANDLE_ANSWER_SUCCESS",payload:t}),setTimeout((function(){var e=u+1;e<=i.length-1?(a({type:"SET_STEP",payload:e}),a({type:"GET_QUESTION",payload:b(o[e])})):a({type:"SET_END_GAME"})}),2e3)):(a({type:"HANDLE_ANSWER_FAIL",payload:t}),setTimeout((function(){a({type:"SET_END_GAME"})}),2e3))}),2e3)}}}(t,a))},resetGame:function(){return e((function(e){e({type:"RESET_GAME"})}))}}})),(function(e){return function(t){var a=Object.assign({},t);return r.a.createElement("div",{className:"wrapped"},r.a.createElement(e,a))}})),O=a(5),y=(a(32),matchMedia("(hover: none)").matches),w=function(e){return function(t){var a=e.image,s=e.parallax,c=e.backgroundFigure;return function(e){var u=Object.assign({},e),o=Object(n.useState)({left:0,top:0}),i=Object(O.a)(o,2),l=i[0],m=i[1],p=Object(n.useState)("100%"),d=Object(O.a)(p,2),g=d[0],f=d[1],E="success"===u.status;Object(n.useEffect)((function(){if(s&&!y)return document.addEventListener("mousemove",(function(e){m({left:e.pageX,top:e.pageY})})),function(){document.removeEventListener("mousemove",null)}}),[]),Object(n.useEffect)((function(){E&&function(e,t,a,n){var r=a-t,s=Math.abs(Math.floor(n/r));s=Math.max(s,50);var c,u=(new Date).getTime()+n;function o(){var t=(new Date).getTime(),s=Math.max((u-t)/n,0),o=Math.round(a-s*r);e(o+"%"),o===a&&clearInterval(c)}c=setInterval(o,s),o()}(f,100,50,500)}),[E]);var _=function(e){if(!s)return{};var t=e,a=l.left*t,n=l.top*t;return{transform:"translate(".concat(a,"px, ").concat(n,"px)")}};return r.a.createElement("section",{className:"game-section",style:{"--figure":"".concat(g)}},a&&E&&r.a.createElement("div",{className:"game-section__image-container"},r.a.createElement("img",{className:"game-section__image",style:_(.03),src:"./images/hand.svg",alt:""})),c&&r.a.createElement("div",{className:"game-section__figure",style:_(.015)}),r.a.createElement("div",{className:"game-section__content"},r.a.createElement(t,u)))}}},j=(a(33),function(e){var t=e.event,a=e.children;return r.a.createElement("button",{onClick:t,className:"button"},a)});a(34);var h=function(){return r.a.createElement("div",{className:"spinner"},"loading...")},T=(a(35),w({image:!0,parallax:!0,backgroundFigure:!0})((function(e){var t=e.initialGameSession,a=e.getQuestion,n=e.status,s=e.setStep,c="loading"===n?r.a.createElement(h,null):null,u="failure"===n?r.a.createElement("div",null,"Something went wrong... ",r.a.createElement("br",null),"Please, try again."):null,o="success"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"game-initial__title"},"Who wants to be a\xa0millionaire?"),r.a.createElement("div",{className:"game-initial__action"},r.a.createElement(j,{event:function(){t(),a(),s()}},"Start"))):null;return r.a.createElement("div",{className:"game-initial"},c,u,o)}))),Q=(a(36),w({image:!0,parallax:!0,backgroundFigure:!1})((function(e){var t=e.score,a=e.steps,n=e.resetGame,s=(e.status,a.find((function(e){return e.id===t-1})));return r.a.createElement("div",{className:"game-result"},r.a.createElement("div",{className:"game-result__score"},r.a.createElement("div",{className:"game-result__score-label"},"Total score:"),r.a.createElement("div",{className:"game-result__score-value"},"$",(null===s||void 0===s?void 0:s.cost)||0," earned")),r.a.createElement("div",{className:"game-result__action"},r.a.createElement(j,{event:n},"Try again...")))}))),G=["a","b","c","d","e","f","g"],A=(a(37),function(e){var t=e.openMenu;return r.a.createElement("div",{className:"menu-button ".concat(t?"is-open":"")},r.a.createElement("div",{className:"menu-button__line"}))});a(38);var I=function(e){var t=e.panelSteps,a=(e.currentStep,t.map((function(e){var t=e.id,a=e.status,n=e.cost;return r.a.createElement("div",{key:t,className:"game-panel__item ".concat(a)},r.a.createElement("div",{className:"game-panel__label"},r.a.createElement("div",{className:"game-panel__decor-arrow game-panel__decor-arrow--left"}),r.a.createElement("div",{className:"game-panel__decor-arrow game-panel__decor-arrow--right"}),r.a.createElement("div",{className:"game-panel__value"},"$ ",n.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))))})));return r.a.createElement("div",{className:"game-panel"},a)},C=(a(39),w({image:!1,parallax:!1,backgroundFigure:!1})((function(e){var t=e.panelSteps,a=e.currentQuestion,s=e.currentStep,c=e.checkAnswer,u=e.canSelect,o=e.debug,i=Object(n.useState)(!1),l=Object(O.a)(i,2),m=l[0],p=l[1],d=a.question,g=a.answers;return r.a.createElement("div",{className:"game-steps ".concat(m?"is-open":"")},r.a.createElement("div",{className:"game-steps__menu",onClick:function(){p(!m)}},r.a.createElement(A,{openMenu:m})),r.a.createElement("div",{className:"game-steps__body"},r.a.createElement("div",{className:"game-steps__question"},d,o&&r.a.createElement("div",{className:"game-steps__question-debug"},"(",a.correct.join(", "),")")),r.a.createElement("div",{className:"game-steps__answers"},g.map((function(e,t){return r.a.createElement("div",{key:t,className:"game-steps__answer ".concat(e.status),onClick:function(a){return function(e,t,a){if(!u)return e.stopPropagation(),!1;c(t,a)}(a,e.answer,t)}},r.a.createElement("div",{className:"game-steps__answer-label"},r.a.createElement("div",{className:"game-steps__answer-decor-arrow game-steps__answer-decor-arrow--left"}),r.a.createElement("div",{className:"game-steps__answer-decor-arrow game-steps__answer-decor-arrow--right"}),r.a.createElement("div",{className:"game-steps__answer-value"},r.a.createElement("div",{className:"game-steps__answer-prefix"},G[t]),e.answer)))})))),r.a.createElement("div",{className:"game-steps__sidebar ".concat(m?"is-open":"")},r.a.createElement(I,{currentStep:s,panelSteps:t})))})));a(40);var k=N((function(e){var t=e.status,a=e.gameStatus,s=e.getConfig,c=e.initialGameSession,u=e.score,o=e.steps,i=e.currentQuestion,l=e.getQuestion,m=e.currentStep,p=e.setStep,d=e.checkAnswer,g=e.canSelect,f=e.resetGame,E=e.debug;return Object(n.useEffect)((function(){if("idle"===t){var e=localStorage.getItem("debug");s(e)}}),[s,t]),r.a.createElement("div",{className:"game"},"game_start"===a&&r.a.createElement(T,{status:t,getQuestion:l,setStep:p,initialGameSession:c}),"game_play"===a&&r.a.createElement(C,{currentStep:m,panelSteps:o,currentQuestion:i,checkAnswer:d,canSelect:g,debug:E}),"game_end"===a&&r.a.createElement(Q,{status:t,resetGame:f,steps:o,score:u}))})),F=a(19),M=a.n(F),x=a(20),L=a(1),R={status:"idle",error:null,data:null,steps:[],currentStep:0,score:0,gameStatus:"game_start",sessionQuestions:[],currentQuestion:{},canSelect:!1,debug:!1};var D=Object(o.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CONFIG_REQUEST":var a="true"===t.payload;return Object(L.a)({},e,{error:null,status:"loading",debug:a});case"GET_CONFIG_FAIL":return Object(L.a)({},e,{error:t.payload.message,status:"failure"});case"GET_CONFIG_SUCCESS":return Object(L.a)({},e,{data:t.payload.game,status:"success"});case"INITIAL_GAME_SESSION":return Object(L.a)({},e,{currentStep:0,sessionQuestions:t.payload.questions,steps:t.payload.steps,gameStatus:"game_start"});case"GET_QUESTION":return Object(L.a)({},e,{currentQuestion:t.payload,gameStatus:"game_play",canSelect:!0});case"SET_STEP":return Object(L.a)({},e,{currentStep:t.payload,steps:e.steps.map((function(e){return t.payload>0&&e.id===t.payload-1?Object(L.a)({},e,{status:"is-disabled"}):e.id===t.payload?Object(L.a)({},e,{status:"is-active"}):e}))});case"HANDLE_ANSWER_START":return Object(L.a)({},e,{canSelect:!1,currentQuestion:Object(L.a)({},e.currentQuestion,{answers:e.currentQuestion.answers.map((function(e,a){return a===t.payload?Object(L.a)({},e,{status:"is-selected"}):e}))})});case"HANDLE_ANSWER_SUCCESS":return Object(L.a)({},e,{score:e.score+1,currentQuestion:Object(L.a)({},e.currentQuestion,{answers:e.currentQuestion.answers.map((function(e,a){return a===t.payload?Object(L.a)({},e,{status:"is-success"}):e}))})});case"HANDLE_ANSWER_FAIL":var n=e.currentQuestion.correct,r=e.currentQuestion.answers,s=[];return n.forEach((function(e){var t=r.findIndex((function(t){return t.answer===e}));s.push(t)})),Object(L.a)({},e,{currentQuestion:Object(L.a)({},e.currentQuestion,{answers:e.currentQuestion.answers.map((function(e,a){return a===t.payload?Object(L.a)({},e,{status:"is-failure"}):s.includes(a)?Object(L.a)({},e,{status:"is-success"}):e}))})});case"SET_END_GAME":return Object(L.a)({},e,{gameStatus:"game_end"});case"RESET_GAME":return Object(L.a)({},e,{steps:[],currentStep:0,score:0,gameStatus:"game_start",sessionQuestions:[],currentQuestion:{},canSelect:!1});default:return e}}}),U=o.d,q=Object(o.e)(D,U(Object(o.a)(x.a,M.a)));a(41);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:q},r.a.createElement(k,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.6aac868a.chunk.js.map